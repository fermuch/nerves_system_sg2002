#
# Simple Linux Boot Configuration for reCamera (SG2002)
#

# Basic RISC-V/SG2002 settings
arch=riscv
baudrate=115200
board=cv181x
board_name=cv181x
bootdelay=3
consoledev=ttyS0
cpu=generic
vendor=cvitek

# Memory addresses (from SG2002 defaults)
kernel_addr_r=0x40040000
fdt_addr_r=0x41800000
loadaddr=${kernel_addr_r}
uImage_addr=0x81800000

# Device and partition settings
devtype=mmc
devnum=1
bootpart=1:1
rootpart=1:2

# Root filesystem - simple single partition boot
root_device=/dev/mmcblk1p2
console_args=console=${consoledev},${baudrate}
othbootargs=earlycon=sbi riscv.fwsz=0x80000 loglevel=7

# Kernel and DTB files (check what's actually in /boot)
bootfile=/boot/Image.gz
fdtfile=/boot/sg2002_recamera_sd.dtb

# Boot arguments - expanded for debugging
bootargs_base=root=/dev/mmcblk1p2 rootwait rw console=ttyS0,115200 earlycon=sbi riscv.fwsz=0x80000 loglevel=7

# Helper functions - Use FIT image from boot partition
init_mmc=mmc dev ${devnum}; mmc rescan
load_fit=echo Loading FIT image boot.sd...; load ${devtype} ${bootpart} ${uImage_addr} boot.sd
set_bootargs=setenv bootargs ${bootargs_base}; echo Boot args set to: ${bootargs}

# Main boot sequence using FIT image
fit_boot=run init_mmc set_bootargs load_fit; echo Booting from FIT image...; bootm ${uImage_addr}#config-sg2002_recamera_sd

# Default boot command
bootcmd=run fit_boot
